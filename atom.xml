<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://zhangningle.github.io</id>
    <title>Gridea</title>
    <updated>2019-06-05T02:50:00.791Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="http://zhangningle.github.io"/>
    <link rel="self" href="http://zhangningle.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>http://zhangningle.github.io/images/avatar.png</logo>
    <icon>http://zhangningle.github.io/favicon.ico</icon>
    <rights>All rights reserved 2019, Gridea</rights>
    <entry>
        <title type="html"><![CDATA[Vueä¸­çš„éªŒè¯ç™»å½•çŠ¶æ€]]></title>
        <id>http://zhangningle.github.io/post/Vueä¸­çš„éªŒè¯ç™»å½•çŠ¶æ€</id>
        <link href="http://zhangningle.github.io/post/Vueä¸­çš„éªŒè¯ç™»å½•çŠ¶æ€">
        </link>
        <updated>2019-03-09T14:21:55.000Z</updated>
        <content type="html"><![CDATA[<h2 id="vueé¡¹ç›®ä¸­å®ç°ç”¨æˆ·ç™»å½•åŠtokenéªŒè¯">Vueé¡¹ç›®ä¸­å®ç°ç”¨æˆ·ç™»å½•åŠtokenéªŒè¯</h2>
<p>å…ˆè¯´ä¸€ä¸‹æˆ‘çš„å®ç°æ­¥éª¤ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>easy-mock</code>æ–°å»ºç™»å½•æ¥å£ï¼Œæ¨¡æ‹Ÿç”¨æˆ·æ•°æ®</li>
<li>ä½¿ç”¨<code>axios</code>è¯·æ±‚ç™»å½•æ¥å£ï¼ŒåŒ¹é…è´¦å·å’Œå¯†ç </li>
<li>è´¦å·å¯†ç éªŒè¯åï¼Œ æ‹¿åˆ°<code>token</code>ï¼Œå°†tokenå­˜å‚¨åˆ°<code>sessionStorage</code>ä¸­ï¼Œå¹¶è·³è½¬åˆ°é¦–é¡µ</li>
<li>å‰ç«¯æ¯æ¬¡è·³è½¬æ—¶ï¼Œå°±ä½¿ç”¨å¯¼èˆªå®ˆå«(vue-router.beforeEach)åˆ¤æ–­ <code>sessionStorage</code> ä¸­æœ‰æ—  <code>token</code>ï¼Œæ²¡æœ‰å°±è·³è½¬åˆ°ç™»å½•é¡µé¢ï¼Œæœ‰åˆ™è·³è½¬åˆ°å¯¹åº”è·¯ç”±é¡µé¢ã€‚</li>
<li>æ³¨é”€åï¼Œå°±æ¸…é™¤<code>sessionStorage</code>é‡Œçš„<code>token</code>ä¿¡æ¯å¹¶è·³è½¬åˆ°ç™»å½•é¡µé¢</li>
</ol>
<h2 id="ä½¿ç”¨easy-mockæ¨¡æ‹Ÿç”¨æˆ·æ•°æ®">ä½¿ç”¨easy-mockæ¨¡æ‹Ÿç”¨æˆ·æ•°æ®</h2>
<p>æˆ‘ç”¨çš„æ˜¯<a href="https://easy-mock.com/">easy-mock</a>,æ–°å»ºäº†ä¸€ä¸ªæ¥å£ï¼Œç”¨äºæ¨¡æ‹Ÿç”¨æˆ·æ•°æ®:</p>
<pre><code class="language-javascript">{
  &quot;error_code&quot;: 0,
  &quot;data&quot;: [{
      &quot;id&quot;: '1',
      &quot;usertitle&quot;: &quot;ç®¡ç†å‘˜&quot;,
      &quot;username&quot;: &quot;admin&quot;,
      &quot;password&quot;: &quot;123456&quot;,
      &quot;token&quot;: &quot;@date(T)&quot;,
    },
    {
      &quot;id&quot;: '2',
      &quot;usertitle&quot;: &quot;è¶…çº§ç®¡ç†å‘˜&quot;,
      &quot;username&quot;: &quot;root&quot;,
      &quot;password&quot;: &quot;root&quot;,
      &quot;token&quot;: &quot;@date(T)&quot;,
    }
  ]
}
</code></pre>
<p>login.vueä¸­å†™å¥½ç™»é™†æ¡†ï¼š</p>
<pre><code>&lt;template&gt;
&lt;div&gt;
    &lt;p&gt;ç”¨æˆ·åï¼š&lt;input type='text' v-model=&quot;userName&quot;&gt;&lt;/p&gt;
    &lt;p&gt;å¯†ç ï¼š&lt;input type='text' v-model=&quot;passWord&quot;&gt;&lt;/p&gt;
    &lt;button @click=&quot;login()&quot;&gt;ç™»å½•&lt;/button&gt;
&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
 export default {
    data() {
        return {
          userName:'root',
          passWord:'root'
        }
    }
}
&lt;/script&gt;
</code></pre>
<p>ç„¶åä¸‹è½½axiosï¼š<code>npm install axios --save</code>,ç”¨æ¥è¯·æ±‚åˆšåˆšå®šä¹‰å¥½çš„easy-mockæ¥å£ï¼š</p>
<pre><code class="language-javascript"> login(){
        const self = this;
        axios.get('https://easy-mock.com/mock/5c7cd0f89d0184e94358d/museum/login').then(response=&gt;{
          var res =response.data.data,
              len = res.length,
              userNameArr= [],
              passWordArr= [],
              ses= window.sessionStorage; 
          // æ‹¿åˆ°æ‰€æœ‰çš„username
          for(var i=0; i&lt;len; i++){
            userNameArr.push(res[i].username);
            passWordArr.push(res[i].password);
          }
          console.log(userNameArr, passWordArr);
          if(userNameArr.indexOf(this.userName) === -1){
              alert('è´¦å·ä¸å­˜åœ¨ï¼');
          }else{
            var index = userNameArr.indexOf(this.userName);
            if(passWordArr[index] === this.passWord){
              // æŠŠtokenæ”¾åœ¨sessionStorageä¸­
              ses.setItem('data', res[index].token);
              this.$parent.$data.userTitle = res[index].usertitle;
              //éªŒè¯æˆåŠŸè¿›å…¥é¦–é¡µ
              this.startHacking ('ç™»å½•æˆåŠŸï¼');
              //è·³è½¬åˆ°é¦–é¡µ
              this.$router.push('/index');
              // console.log(this.$router);
            }else{
              alert('å¯†ç é”™è¯¯ï¼')
            }
          }
        }).catch(err=&gt;{
          console.log('è¿æ¥æ•°æ®åº“å¤±è´¥ï¼')
        })
      }
</code></pre>
<p>è¿™ä¸€æ­¥æœ€é‡è¦çš„æ˜¯å½“è´¦å·å¯†ç æ­£ç¡®æ—¶ï¼ŒæŠŠè¯·æ±‚å›æ¥çš„<code>token</code>æ”¾åœ¨<code>sessionStorage</code>ä¸­ï¼Œ</p>
<h2 id="é…ç½®è·¯ç”±">é…ç½®è·¯ç”±</h2>
<p>ç„¶åé…ç½®è·¯ç”±æ–°åŠ ä¸€ä¸ªmetaå±æ€§ï¼š</p>
<pre><code class="language-javascript">    {
      path: '/',
      name: 'login',
      component: login,
      meta:{
        needLogin: false
      }
    },
    {
      path: '/index',
      name: 'index',
      component: index,
      meta:{
        needLogin: true
      }
    }
</code></pre>
<p>åˆ¤æ–­æ¯æ¬¡è·¯ç”±è·³è½¬çš„é“¾æ¥æ˜¯å¦éœ€è¦ç™»å½•ï¼Œ</p>
<h2 id="å¯¼èˆªå«å£«">å¯¼èˆªå«å£«</h2>
<p>åœ¨<code>main.js</code>ä¸­é…ç½®ä¸€ä¸ªå…¨å±€å‰ç½®é’©å­å‡½æ•°ï¼š<code>router.beforeEachï¼ˆï¼‰</code>ï¼Œä»–çš„ä½œç”¨å°±æ˜¯åœ¨æ¯æ¬¡è·¯ç”±åˆ‡æ¢çš„æ—¶å€™è°ƒç”¨
è¿™ä¸ªé’©å­æ–¹æ³•ä¼šæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼štoã€fromã€nextã€‚
<code>to</code>ï¼šRouteï¼šå³å°†è¦è¿›å…¥çš„ç›®æ ‡çš„è·¯ç”±å¯¹è±¡ï¼Œ
<code>from</code>ï¼šRouteï¼šå½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€çš„è·¯ç”±ï¼Œ
<code>next</code>ï¼šFunctionï¼šä¸ªäººç†è§£è¿™ä¸ªæ–¹æ³•å°±æ˜¯å‡½æ•°ç»“æŸåæ‰§è¡Œä»€ä¹ˆï¼Œå…ˆçœ‹å®˜æ–¹è§£é‡Š
1.<code>next()</code>ï¼šè¿›è¡Œç®¡é“ä¸­çš„ä¸‹ä¸€ä¸ªé’©å­ã€‚å¦‚æœå…¨éƒ¨é’©å­æ‰§è¡Œå®Œäº†ï¼Œåˆ™å¯¼èˆªçš„çŠ¶æ€å°±æ˜¯confirmedï¼ˆç¡®è®¤çš„ï¼‰ï¼Œ
2.<code>next(false)</code>ï¼šä¸­æ–­å½“å‰çš„å¯¼èˆªã€‚å¦‚æœæµè§ˆå™¨çš„urlæ”¹å˜äº†ï¼ˆå¯èƒ½æ˜¯ç”¨æˆ·æ‰‹åŠ¨æˆ–æµè§ˆå™¨åé€€æŒ‰é’®ï¼‰ï¼Œé‚£ä¹ˆurlåœ°å€ä¼šé‡ç½®åˆ°fromè·¯ç”±å¯¹åº”çš„åœ°å€ã€‚
3.<code>next('/')</code>æˆ–<code>next({path:'/'})</code>ï¼šè·³è½¬åˆ°ä¸€ä¸ªä¸åŒçš„åœ°å€ã€‚å½“å‰å¯¼èˆªè¢«ä¸­æ–­ï¼Œè¿›å…¥ä¸€ä¸ªæ–°çš„å¯¼èˆªã€‚</p>
<h2 id="ç”¨sessionstorageå­˜å‚¨ç”¨æˆ·token">ç”¨sessionStorageå­˜å‚¨ç”¨æˆ·token</h2>
<pre><code class="language-JavaScript">//è·¯ç”±å®ˆå«
router.beforeEach((to, from, next)=&gt;{
    //è·¯ç”±ä¸­è®¾ç½®çš„needLoginå­—æ®µå°±åœ¨toå½“ä¸­ 
    if(window.sessionStorage.data){
      console.log(window.sessionStorage);
      // console.log(to.path) //æ¯æ¬¡è·³è½¬çš„è·¯å¾„
      if(to.path === '/'){
        //ç™»å½•çŠ¶æ€ä¸‹ è®¿é—®login.vueé¡µé¢ ä¼šè·³åˆ°index.vue
        next({path: '/index'});
      }else{
        next();
      }
    }else{
      // å¦‚æœæ²¡æœ‰session ,è®¿é—®ä»»ä½•é¡µé¢ã€‚éƒ½ä¼šè¿›å…¥åˆ° ç™»å½•é¡µ
      if (to.path === '/') { // å¦‚æœæ˜¯ç™»å½•é¡µé¢çš„è¯ï¼Œç›´æ¥next() --&gt;è§£å†³æ³¨é”€åçš„å¾ªç¯æ‰§è¡Œbug
        next();
      } else { // å¦åˆ™ è·³è½¬åˆ°ç™»å½•é¡µé¢
        next({ path: '/' });
      }
    }
})
</code></pre>
<p>è¿™é‡Œç”¨äº†<code>router.beforeEach</code> <a href="https://router.vuejs.org/zh/guide/advanced/">vue-routerå¯¼èˆªå®ˆå«</a>
æ¯æ¬¡è·³è½¬æ—¶éƒ½ä¼šåˆ¤æ–­<code>sessionStorage</code>ä¸­æ˜¯å¦æœ‰<code>token</code>å€¼ï¼Œå¦‚æœæœ‰åˆ™èƒ½æ­£å¸¸è·³è½¬ï¼Œå¦‚æœæ²¡æœ‰é‚£ä¹ˆå°±è¿”å›ç™»å½•é¡µé¢ã€‚</p>
<h2 id="æ³¨é”€">æ³¨é”€</h2>
<p>è‡³æ­¤å°±å®Œæˆäº†ä¸€ä¸ªç®€å•çš„ç™»å½•çŠ¶æ€äº†ï¼Œæµè§ˆå™¨å…³é—­å<code>sessionStorage</code>ä¼šæ¸…ç©ºçš„ï¼Œæ‰€ä»¥å½“ç”¨æˆ·å…³é—­æµè§ˆå™¨å†æ‰“å¼€æ˜¯éœ€è¦é‡æ–°ç™»å½•çš„</p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ¸…é™¤<code>sessionStorage</code>ï¼Œæ¸…é™¤åŠ¨ä½œå¯ä»¥åšæˆæ³¨é”€ç™»å½•ï¼Œè¿™ä¸ªå°±ç®€å•äº†ã€‚</p>
<pre><code class="language-javascript">    loginOut(){
    // æ³¨é”€å æ¸…é™¤sessionä¿¡æ¯ ï¼Œå¹¶è¿”å›ç™»å½•é¡µ
    window.sessionStorage.removeItem('data');
    this.common.startHacking(this, 'success', 'æ³¨é”€æˆåŠŸï¼');
    this.$router.push('/index'); 
    }
</code></pre>
<p>å†™ä¸€ä¸ªæ¸…é™¤<code>sessionStorag</code>çš„æ–¹æ³•ã€‚
ä¸€ä¸ªç®€å•çš„ä¿å­˜ç™»å½•çŠ¶æ€çš„å°Demoã€‚</p>
<hr>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://cloud.tencent.com/developer/article/1199255">è…¾è®¯äº‘ç¤¾åŒº-Vue+SessionStorageå®ç°ç®€å•çš„ç™»å½•</a></li>
<li><a href="https://segmentfault.com/a/1190000016084468">SF-ä»å‰åç«¯åˆ†åˆ«å­¦ä¹ â€”â€”æ³¨å†Œ/ç™»å½•æµç¨‹2</a></li>
<li><a href="https://segmentfault.com/a/1190000009086403">Vue-routerå®ç°å•é¡µé¢åº”ç”¨åœ¨æ²¡æœ‰ç™»å½•æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢</a></li>
<li><a href="https://segmentfault.com/a/1190000015201803">vue+axiosæ–°æ‰‹å®è·µå®ç°ç™»é™†</a></li>
<li><a href="https://segmentfault.com/a/1190000015637039">Vueå®æˆ˜(å››)ç™»å½•/æ³¨å†Œé¡µçš„å®ç°</a></li>
<li><a href="https://segmentfault.com/a/1190000016047911">vueé¡µé¢æ§åˆ¶æƒé™,vuexåˆ·æ–°ä¿å­˜çŠ¶æ€ã€ç™»å½•çŠ¶æ€ä¿å­˜</a></li>
<li><a href="https://segmentfault.com/a/1190000016047911">vueé¡µé¢æ§åˆ¶æƒé™,vuexåˆ·æ–°ä¿å­˜çŠ¶æ€ã€ç™»å½•çŠ¶æ€ä¿å­˜</a></li>
<li><a href="http://www.codes51.com/itwd/4114969.html">(vue.js)å‰åç«¯åˆ†ç¦»çš„å•é¡µåº”ç”¨å¦‚ä½•æ¥åˆ¤æ–­å½“å‰ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Ÿ</a></li>
<li><a href="https://segmentfault.com/a/1190000016040068">Vueç™»å½•æ³¨å†Œï¼Œå¹¶ä¿æŒç™»å½•çŠ¶æ€</a></li>
<li><a href="https://www.cnblogs.com/hcxy/p/7993724.html">vueç™»å½•æ³¨å†ŒåŠtokenéªŒè¯</a></li>
<li><a href="https://www.cnblogs.com/web-record/p/9876916.html">Vueé¡¹ç›®ä¸­å®ç°ç”¨æˆ·ç™»å½•åŠtokenéªŒè¯</a></li>
</ul>
<p>vue-routerå®ˆå«å¯¼èˆªå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%85%A8%E5%B1%80%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%AB">vue-routerå¯¼èˆªå®ˆå«</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>http://zhangningle.github.io/post/hello-gridea</id>
        <link href="http://zhangningle.github.io/post/hello-gridea">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="http://hvenotes.fehey.com/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>ğ–¶ğ—‚ğ—‡ğ–½ğ—ˆğ—ğ—Œ</strong> æˆ– <strong>ğ–¬ğ–ºğ–¼ğ–®ğ–²</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>